scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(nc) +
tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "Blues",
style = "quantile") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(nc) +
tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "Blues",
style = "pretty") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(Uruguay) +
tm_fill()
tm_shape(Uruguay) +
tm_fill() +
tm_layout(bg.color = "lightblue")
tm_shape(Uruguay) +
tm_borders(col = "black", lwd = 0.5, lty = "dashed")
tm_basemap(c(StreetMap = "OpenStreetMap",
TopoMap = "OpenTopoMap")) +
tm_shape(Uruguay) +
tm_borders(col = "black", lwd = 0.5, lty = "dashed")
rm(list = ls())
library(tidyverse)
library(sf)
library(tmap)
Accidents <- st_read("Montevideo_Data/Accidentes2006-2010/accidentes2006-2010.shp")
Accidents = st_set_crs(Accidents, 32721)
Stations <- st_read("Montevideo_Data/afe_estaciones/afe_estaciones.shp")
Stations <- st_set_crs(Stations, 32721)
Uruguay <- st_read("Montevideo_Data/Vectoriales_2011/ine_depto.shp")
Uruguay <- st_set_crs(Uruguay, 32721)
Bicicircuitos <- st_read(
"Montevideo_Data/CyclingMontevideoData/v_bi_bicicircuitos/v_bi_bicicircuitos.shp")
tm_shape(Uruguay) +
tm_polygons()
tm_shape(Uruguay) +
tm_fill()
tm_shape(Uruguay) +
tm_fill() +
tm_layout(bg.color = "lightblue")
tm_shape(Uruguay) +
tm_borders(col = "black", lwd = 0.5, lty = "dashed")
Montevideo <- Uruguay %>% filter(NOMBRE == "MONTEVIDEO")
tm_shape(Montevideo) +
tm_polygons() +
tm_shape(Accidents) + tm_bubbles()
tm_shape(Montevideo) +
tm_polygons() +
tm_shape(Accidents) + tm_bubbles() +
tm_layout(frame = FALSE)
MyMap <- tm_shape(Uruguay) +
tm_polygons(col = "deepskyblue1")
MyMap
st_bbox(Uruguay)
st_bbox(Montevideo)
tm_shape(Uruguay, bbox = st_bbox(Montevideo)) +
tm_polygons(col = "deepskyblue1")
nc = st_read(system.file("shape/nc.shp", package="sf"))
tm_shape(nc) + tm_polygons(col = "BIR79")
tm_shape(nc) + tm_fill(col = "BIR79")
tm_shape(nc) + tm_fill(col = "BIR79") + tm_borders()
tm_shape(nc) + tm_polygons(col = "BIR79")
tm_shape(nc) + tm_polygons(col = "BIR79") +
tm_compass() + tm_scale_bar()
tm_shape(nc) + tm_polygons(col="BIR79") +
tm_layout(legend.outside = TRUE, frame = FALSE)
tm_shape(nc) + tm_polygons(col="BIR79") +
tm_layout(legend.position = c(0.2, 0.03),
scale = 0.8,
legend.frame = T)
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T)
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(title = "THI IS MY TITLE",
legend.position = c(0.01, 0.05),
scale = 0.9,
legend.frame = T) +
tm_add_legend(type = c("fill"),
labels = c("Some Area", "Other Area"),
col = c("#66c2a5", "#e5c494"),
title = "Other Areas") +
tm_add_legend(type = "symbol",
labels = c("A point", "Other Point"),
col = c("#e78ac3", "grey"))
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass()
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass(size = 5, type = "8star")
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass(size = 5, type = "rose", lwd = 3, show.labels = 0)
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar()
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200), text.size = 2, position = c(0.06, 0))
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T) +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200), text.size = 1, position = c(0.06, 0),
lwd = 5, color.dark = "darkgreen", color.light = "blue")
MyMap <- tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84") +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200), text.size = 1, position = c(0.06, 0),
lwd = 3)
MyMap
tmap_mode("view")
MyMap
tmap_mode("plot")
tm_shape(nc) + tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "Blues") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(nc) +
tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "Blues",  n = 4) +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(nc) +
tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "Blues",
style = "pretty") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
library(RColorBrewer)
display.brewer.all()
tm_shape(nc) + tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "YlGnBu") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200),size = 1, position = c(0.06,0),
lwd = 3)
tm_shape(nc) + tm_polygons(col="BIR79", title = "Births 1979 - 84", palette = "-YlGnBu") +
tm_layout(legend.position = c(0.01,0.65),
scale=0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0,50,100,150,200), text.size = 1, position = c(0.06,0),
lwd = 3)
summary(nc$BIR79)
nc %>% ggplot(aes(x=BIR79)) + geom_histogram()
Breaks <- c(0, 2000, 4000, 6000, 31000)
Labels <- c("0 - 2000", "2000 - 4000", "4000 - 6000", ">6000")
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84", palette = "YlGnBu",
breaks = Breaks, labels = Labels) +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200), text.size = 1, position = c(0.06, 0),
lwd = 3)
MyPalette <- c("#f2f0f7", "#cbc9e2", "#9e9ac8", "#6a51a3")
tm_shape(nc) + tm_polygons(col = "BIR79", title = "Births 1979 - 84", palette = MyPalette,
breaks = Breaks, labels = Labels) +
tm_layout(legend.position = c(0.01, 0.65),
scale = 0.65,
legend.frame = T,
bg.color = "lightblue") +
tm_compass(size = 5, type = "rose", lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200), text.size = 1, position = c(0.06, 0),
lwd = 3)
MontevideoMap <- tm_shape(Montevideo) +
tm_polygons() +
tm_shape(Accidents) + tm_bubbles()
UruguayMap <- tm_shape(Uruguay) +
tm_polygons()
library(grid)
MontevideoMap
print(UruguayMap, vp = viewport(0.17, 0.8, width = 0.25, height = 0.25))
MontevideoMap <- tm_shape(Montevideo) +
tm_polygons(col = "deepskyblue1")
MontevideoNeigh <- Uruguay %>% filter(NOMBRE %in% c("SAN JOSE", "CANELONES", "MONTEVIDEO"))
AuxMap <- tm_shape(MontevideoNeigh) + tm_polygons(col = "green")
MontevideoMap
print(AuxMap, vp = viewport(0.17, 0.8, width = 0.2, height = 0.2))
MontevideoBox <- st_bbox(Montevideo) %>% st_as_sfc() #Why not st_as_sf?
tm_shape(MontevideoBox) + tm_polygons(col = "white", border.col = "blue", lwd = 4)
#plot(st_geometry(MontevideoBox))
AuxMap <- tm_shape(MontevideoNeigh) + tm_polygons(col = "green") +
tm_shape(MontevideoBox) + tm_polygons(border.col = "red", lwd = 2.5, alpha = 0.3)
MontevideoMap
print(AuxMap, vp = viewport(0.17, 0.8, width = 0.2, height = 0.2))
tm_shape(Montevideo) + tm_polygons() +
tm_shape(Accidents) + tm_dots(alpha = 0.5) + tm_facets(by = "ANIO")
tm_shape(Montevideo) + tm_polygons() +
tm_shape(Accidents) + tm_dots(alpha = 0.5) + tm_facets(by = "ANIO", nrow = 1)
tm_shape(Montevideo) + tm_polygons() +
tm_shape(Accidents) + tm_dots(alpha = 0.5) + tm_facets(by = "ANIO", ncol = 1)
Accidents2006 <- Accidents %>% filter(ANIO == "2006")
Accidents2010 <- Accidents %>% filter(ANIO == "2010")
Complements <- tm_compass() + tm_scale_bar()
Map2006 <- tm_shape(Accidents2006) + tm_dots() + Complements
Map2010 <- tm_shape(Accidents2010) + tm_dots() + Complements
tmap_arrange(Map2006, Map2010)
library(tidyverse)
library(sf)
library(leaflet)
leaflet() %>%
addProviderTiles(providers$Esri.NatGeoWorldMap)
leaflet() %>%
addProviderTiles(providers$Esri.NatGeoWorldMap) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 8)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543, popup = "Plaza Independencia")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543, popup = "Plaza Independencia") %>%
addMarkers(-56.198309, -34.906563, popup = "Palacio Salvo")
Sites <- data.frame(longitud = c(-56.199735, -56.198309, -56.201037),
lattitud = c(-34.906543, -34.906563, -34.907896),
Name = c("Plaza Independencia", "Palacio Salvo", "Teatro Solis"))
leaflet(Sites) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(lng = ~longitud, lat = ~lattitud, popup = ~Name)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(data = Sites, lng = ~longitud, lat = ~lattitud, popup = ~Name)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircleMarkers(data = Sites, lng = ~longitud, lat = ~lattitud)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100, opacity = 1, fillOpacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100, opacity = 1, fillOpacity = 0.7, color = "black", fillColor = "green")
getwd()
Uruguay <- st_read("Montevideo_Data/Vectoriales_2011/ine_depto.shp")
#ine_depto.shp
Accidents <- st_read("Montevideo_Data/Accidentes2006-2010/accidentes2006-2010.shp")
Uruguay = st_set_crs(Uruguay, 32721)
Accidents = st_set_crs(Accidents, 32721)
Uruguay <- st_transform(Uruguay,4326)
Accidents = st_transform(Accidents, 4326)
leaflet(Uruguay) %>%
addPolygons()
leaflet(Uruguay) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white")
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white", fillOpacity = 1,
highlightOptions = highlightOptions(color = "blue", fillColor = "blue",
weight = 0, bringToFront = TRUE))
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white", fillOpacity = 1,
label = ~NOMBRE, labelOptions = labelOptions(
style = list("font-weight" = "normal"),
textsize = "10px"),
highlightOptions = highlightOptions(color = "blue", fillColor = "blue",
weight = 0, bringToFront = TRUE))
#source: https://rstudio.github.io/leaflet/choropleths.html &
# From http://leafletjs.com/examples/choropleth/us-states.js
#install.packages("geojsonio")
#states <- geojsonio::geojson_read("json/us-states.geojson", what = "sp")
#see: https://github.com/rstudio/leaflet/issues/498
states <- geojsonio::geojson_read(
x = "https://raw.githubusercontent.com/PublicaMundi/MappingAPI/master/data/geojson/us-states.json"
, what = "sp"
)
bins <- c(0, 10, 20, 50, 100, 200, 500, 1000, Inf)
pal <- colorBin("YlOrRd", domain = states$density, bins = bins)
labels <- sprintf(
"<strong>%s</strong><br/>%g people / mi<sup>2</sup>",
states$name, states$density
) %>% lapply(htmltools::HTML)
leaflet(states) %>%
setView(-96, 37.8, 4) %>%
addProviderTiles("MapBox", options = providerTileOptions(
id = "mapbox.light",
accessToken = Sys.getenv('MAPBOX_ACCESS_TOKEN'))) %>%
addPolygons(
fillColor = ~pal(density),
weight = 2,
opacity = 1,
color = "white",
dashArray = "3",
fillOpacity = 0.7,
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")) %>%
addLegend(pal = pal, values = ~density, opacity = 0.7, title = NULL,
position = "bottomright")
Accidents2009 <- Accidents %>% filter(ANIO == "2009")
leaflet(Accidents2009) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addCircles()
ls()
rm(list = ls())
library(tidyverse)
library(sf)
library(leaflet)
leaflet() %>%
addProviderTiles(providers$Esri.NatGeoWorldMap)
leaflet() %>%
addProviderTiles(providers$Esri.NatGeoWorldMap) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 8)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543, popup = "Plaza Independencia")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(-56.199735, -34.906543, popup = "Plaza Independencia") %>%
addMarkers(-56.198309, -34.906563, popup = "Palacio Salvo")
Sites <- data.frame(longitud = c(-56.199735, -56.198309, -56.201037),
lattitud = c(-34.906543, -34.906563, -34.907896),
Name = c("Plaza Independencia", "Palacio Salvo", "Teatro Solis"))
leaflet(Sites) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(lng = ~longitud, lat = ~lattitud, popup = ~Name)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addMarkers(data = Sites, lng = ~longitud, lat = ~lattitud, popup = ~Name)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircleMarkers(data = Sites, lng = ~longitud, lat = ~lattitud)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100, opacity = 1, fillOpacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -56.199735, lat = -34.906543, zoom = 16) %>%
addCircles(data = Sites, lng = ~longitud, lat = ~lattitud,
radius = 100, opacity = 1, fillOpacity = 0.7, color = "black", fillColor = "green")
Uruguay <- st_read("Montevideo_Data/Vectoriales_2011/ine_depto.shp")
#ine_depto.shp
Accidents <- st_read("Montevideo_Data/Accidentes2006-2010/accidentes2006-2010.shp")
Uruguay = st_set_crs(Uruguay, 32721)
Accidents = st_set_crs(Accidents, 32721)
Uruguay <- st_transform(Uruguay,4326)
Accidents = st_transform(Accidents, 4326)
leaflet(Uruguay) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons()
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white")
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white", fillOpacity = 1,
highlightOptions = highlightOptions(color = "blue", fillColor = "blue",
weight = 0, bringToFront = TRUE))
leaflet(Uruguay) %>%
addProviderTiles(providers$Stamen.Watercolor) %>%
addPolygons(color = "black", weight = 2, fillColor = "white", fillOpacity = 1,
label = ~NOMBRE, labelOptions = labelOptions(
style = list("font-weight" = "normal"),
textsize = "10px"),
highlightOptions = highlightOptions(color = "blue", fillColor = "blue",
weight = 0, bringToFront = TRUE))
#source: https://rstudio.github.io/leaflet/choropleths.html &
# From http://leafletjs.com/examples/choropleth/us-states.js
#install.packages("geojsonio")
#states <- geojsonio::geojson_read("json/us-states.geojson", what = "sp")
#see: https://github.com/rstudio/leaflet/issues/498
states <- geojsonio::geojson_read(
x = "https://raw.githubusercontent.com/PublicaMundi/MappingAPI/master/data/geojson/us-states.json"
, what = "sp"
)
bins <- c(0, 10, 20, 50, 100, 200, 500, 1000, Inf)
pal <- colorBin("YlOrRd", domain = states$density, bins = bins)
labels <- sprintf(
"<strong>%s</strong><br/>%g people / mi<sup>2</sup>",
states$name, states$density
) %>% lapply(htmltools::HTML)
leaflet(states) %>%
setView(-96, 37.8, 4) %>%
addProviderTiles("MapBox", options = providerTileOptions(
id = "mapbox.light",
accessToken = Sys.getenv('MAPBOX_ACCESS_TOKEN'))) %>%
addPolygons(
fillColor = ~pal(density),
weight = 2,
opacity = 1,
color = "white",
dashArray = "3",
fillOpacity = 0.7,
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")) %>%
addLegend(pal = pal, values = ~density, opacity = 0.7, title = NULL,
position = "bottomright")
Accidents2009 <- Accidents %>% filter(ANIO == "2009")
leaflet(Accidents2009) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addCircles()
